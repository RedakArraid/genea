# Masquage des handles - Interface ultra-épurée\n\n## Modification finale : Handles masqués par défaut\n\nJ'ai ajouté le masquage des handles pour une interface encore plus épurée :\n\n### 🎭 **Comportement de masquage**\n\n#### **PersonNode**\n- **Par défaut** : Handles **invisibles** (`opacity-0`)\n- **Au survol** : Handles **visibles** (`opacity-100`) \n- **Transition** : Apparition fluide en 200ms\n- **Déclencheur** : État `showActions` (même que le menu)\n\n#### **MarriageEdge**\n- **Par défaut** : Bouton \"+\" **invisible** (`opacity-0`)\n- **Au survol** : Bouton \"+\" **visible** (`opacity-100`)\n- **Transition** : Apparition fluide en 200ms\n- **Déclencheur** : État local `isHovered`\n\n### 🔧 **Implémentation technique**\n\n#### **PersonNode - Exemple handle parent**\n```jsx\n<div \n  className={`absolute -top-1.5 left-1/2 transform -translate-x-1/2 group cursor-pointer z-20 transition-opacity duration-200 ${\n    showActions ? 'opacity-100' : 'opacity-0'\n  }`}\n  onClick={(e) => handleActionClick(e, 'parent')}\n  title=\"Ajouter un parent\"\n>\n  <div className=\"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center border-0 shadow-sm hover:scale-150 transition-all duration-200\">\n    <PlusCircle className=\"w-1.5 h-1.5 text-white\" />\n  </div>\n  {/* Handles ReactFlow masqués */}\n</div>\n```\n\n#### **MarriageEdge - Bouton masqué**\n```jsx\nconst MarriageEdge = ({ /* props */ }) => {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  return (\n    <g \n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <BaseEdge /* ligne de mariage */ />\n      \n      <g className={`transition-opacity duration-200 ${\n        isHovered ? 'opacity-100' : 'opacity-0'\n      }`}>\n        <circle /* bouton + */ />\n        <text>+</text>\n      </g>\n      \n      {/* Lignes vers enfants toujours visibles */}\n    </g>\n  );\n};\n```\n\n### 📊 **États de visibilité**\n\n| Élément | État normal | Au survol du nœud | Au survol de l'arête |\n|---------|-------------|-------------------|-----------------------|\n| **Handles PersonNode** | 🫥 Invisible | ✅ **Visible** | 🫥 Invisible |\n| **Menu actions** | 🫥 Invisible | ✅ **Visible** | 🫥 Invisible |\n| **Bouton MarriageEdge** | 🫥 Invisible | 🫥 Invisible | ✅ **Visible** |\n| **Lignes enfants** | ✅ **Visible** | ✅ **Visible** | ✅ **Visible** |\n| **Contenu nœud** | ✅ **Visible** | ✅ **Visible** | ✅ **Visible** |\n\n### 🎨 **Impact visuel**\n\n#### ✅ **Avantages majeurs**\n- **Interface ultra-épurée** : Aucun élément de contrôle visible par défaut\n- **Focus sur le contenu** : Les informations familiales sont prioritaires\n- **Découverte progressive** : Les actions apparaissent à la demande\n- **Esthétique minimaliste** : Look très professionnel et moderne\n- **Lisibilité maximale** : Aucune distraction visuelle\n\n#### 🎯 **Utilisabilité préservée**\n- **Découvrabilité intuitive** : Les utilisateurs survolent naturellement\n- **Feedback immédiat** : Apparition fluide des contrôles\n- **Actions toujours accessibles** : Simples survols requis\n- **Cohérence UX** : Comportement uniforme sur tous les éléments\n\n### 🔄 **Workflow utilisateur**\n\n#### **Avant (handles visibles)**\n```\n1. L'utilisateur voit l'arbre avec tous les boutons\n2. L'interface est chargée visuellement\n3. Actions directement visibles mais distrayantes\n```\n\n#### **Après (handles masqués)**\n```\n1. L'utilisateur voit un arbre épuré et lisible\n2. Survol d'un nœud → Handles + menu apparaissent\n3. Clic sur handle → Action exécutée\n4. Fin du survol → Interface redevient épurée\n```\n\n### 📱 **Adaptabilité**\n\n#### **Desktop** ✅\n- Survol de souris parfaitement géré\n- Transitions fluides et réactives\n- Expérience utilisateur optimale\n\n#### **Tablette** ✅ \n- Fonctionnement avec les interactions tactiles\n- Survol simulé sur les appareils tactiles\n- Accessibilité maintenue\n\n#### **Mobile** ⚠️\n- Pas de survol réel sur mobile\n- Nécessiterait un tap pour révéler (à considérer)\n- Ou handles toujours visibles sur mobile\n\n### 🎛️ **Options de personnalisation**\n\nPour adapter le comportement si nécessaire :\n\n#### **Option 1 : Toujours visible sur mobile**\n```jsx\nconst isMobile = window.innerWidth < 768;\n\nclassName={`... ${\n  isMobile || showActions ? 'opacity-100' : 'opacity-0'\n}`}\n```\n\n#### **Option 2 : Affichage toggle**\n```jsx\nconst [alwaysShowHandles, setAlwaysShowHandles] = useState(false);\n\nclassName={`... ${\n  alwaysShowHandles || showActions ? 'opacity-100' : 'opacity-0'\n}`}\n```\n\n#### **Option 3 : Délai d'apparition**\n```jsx\nconst [showActions, setShowActions] = useState(false);\nconst [timeoutId, setTimeoutId] = useState(null);\n\nconst handleMouseEnter = () => {\n  if (timeoutId) clearTimeout(timeoutId);\n  const id = setTimeout(() => setShowActions(true), 100);\n  setTimeoutId(id);\n};\n```\n\n### 📏 **Dimensions finales**\n\nAprès toutes les optimisations :\n\n| Élément | Taille | Visibilité | Transition |\n|---------|---------|------------|------------|\n| **Handles cercle** | 12px | Masqué → Visible | 200ms |\n| **Icônes handles** | 6px | Masqué → Visible | 200ms |\n| **MarriageEdge bouton** | 12px | Masqué → Visible | 200ms |\n| **Menu icônes** | 10px | Masqué → Visible | 200ms |\n| **Hover scale** | +50% | Au survol | 200ms |\n\n### 🏆 **Résultat final**\n\n🎉 **Interface ultra-professionnelle** avec :\n- **0% d'encombrement visuel** par défaut\n- **100% de fonctionnalité** accessible au survol\n- **Esthétique minimale** et moderne\n- **Transitions fluides** et élégantes\n- **Expérience utilisateur** intuitive et épurée\n\nL'arbre généalogique ressemble maintenant à une **œuvre d'art interactive** où les contrôles n'apparaissent que quand ils sont nécessaires ! ✨\n\n### 🧪 **Test recommandé**\n\n1. **Charger l'arbre** → Vérifier l'aspect épuré\n2. **Survoler un nœud** → Contrôles apparaissent\n3. **Quitter le survol** → Contrôles disparaissent\n4. **Survoler une arête de mariage** → Bouton \"+\" apparaît\n5. **Cliquer sur les handles** → Actions fonctionnent\n6. **Navigation** → Interface reste fluide et réactive\n\nPerfection atteinte ! 🎯\n