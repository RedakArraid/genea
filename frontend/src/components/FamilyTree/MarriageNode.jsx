import React, { useState, useCallback } from 'react';\nimport { Handle, Position } from 'reactflow';\nimport { Heart, Baby, Trash2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n/**\n * Nœud de mariage - représente l'union entre deux personnes\n * Permet d'ajouter des enfants directement depuis le nœud\n */\nconst MarriageNode = ({ data, id, onAddChild, onDeleteMarriage }) => {\n  const [showActions, setShowActions] = useState(false);\n  \n  const handleAddChild = useCallback((e) => {\n    e.stopPropagation();\n    onAddChild?.(id, data.spouse1Id, data.spouse2Id);\n  }, [id, data.spouse1Id, data.spouse2Id, onAddChild]);\n  \n  const handleDelete = useCallback((e) => {\n    e.stopPropagation();\n    onDeleteMarriage?.(id);\n  }, [id, onDeleteMarriage]);\n  \n  return (\n    <motion.div\n      className=\"bg-red-50 border-2 border-red-300 rounded-full p-2 shadow-md hover:shadow-lg transition-all duration-200\"\n      style={{ width: 40, height: 40 }}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => setShowActions(false)}\n      whileHover={{ scale: 1.1 }}\n      transition={{ duration: 0.2 }}\n    >\n      {/* Icône de cœur au centre */}\n      <div className=\"flex items-center justify-center w-full h-full\">\n        <Heart className=\"w-5 h-5 text-red-500 fill-current\" />\n      </div>\n      \n      {/* Handles pour les conjoints (gauche et droite) */}\n      <Handle\n        type=\"target\"\n        position={Position.Left}\n        id=\"spouse1\"\n        className=\"!w-3 !h-3 !bg-red-500 !border-2 !border-white !left-[-6px]\"\n        style={{ top: '50%', transform: 'translateY(-50%)' }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Right}\n        id=\"spouse2\"\n        className=\"!w-3 !h-3 !bg-red-500 !border-2 !border-white !right-[-6px]\"\n        style={{ top: '50%', transform: 'translateY(-50%)' }}\n      />\n      \n      {/* Handle pour les enfants (bas) */}\n      <Handle\n        type=\"source\"\n        position={Position.Bottom}\n        id=\"children\"\n        className=\"!w-3 !h-3 !bg-green-500 !border-2 !border-white !bottom-[-6px]\"\n        style={{ left: '50%', transform: 'translateX(-50%)' }}\n      />\n      \n      {/* Menu d'actions au survol */}\n      <AnimatePresence>\n        {showActions && (\n          <motion.div \n            className=\"absolute -bottom-12 left-1/2 transform -translate-x-1/2 flex gap-1 bg-white rounded-lg shadow-lg p-1 z-20 border\"\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 10 }}\n            transition={{ duration: 0.2 }}\n          >\n            <button \n              className=\"p-1.5 hover:bg-green-100 rounded transition-colors\" \n              title=\"Ajouter un enfant\"\n              onClick={handleAddChild}\n            >\n              <Baby className=\"w-4 h-4 text-green-600\" />\n            </button>\n            <button \n              className=\"p-1.5 hover:bg-red-100 rounded transition-colors\" \n              title=\"Supprimer le mariage\"\n              onClick={handleDelete}\n            >\n              <Trash2 className=\"w-4 h-4 text-red-600\" />\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      \n      {/* Nom du couple en tooltip */}\n      {data.spouseName1 && data.spouseName2 && (\n        <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none\">\n          {data.spouseName1} ❤️ {data.spouseName2}\n        </div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default MarriageNode;